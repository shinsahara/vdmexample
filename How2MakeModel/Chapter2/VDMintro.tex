本章では、形式手法の概要と本ブックレットで使用するVDMについて説明する。

\section{形式手法VDMとは？}
	\label{WhatIsVDM}
	\index{けいしきしゅほうVDMとは@形式手法VDMとは？}
VDMはVienna Development Methodの略であり、
1960年代から1970年代にIBMウィーン研究所で開発され、
IBMの各種プログラミング言語の仕様記述に使用された。

その後、汎用の仕様記述言語として拡張され、
1996年に、その仕様記述言語VDM-SL\cite{SCSK2012SL}
が世界初のISO標準(ISO/IEC 13817)仕様記述言語になった
	\index{ISOひょうじゅん@ISO標準(ISO/IEC 13817)}
形式手法の元祖である。


特徴としては、以下がある。

\begin{itemize}
	\item　厳密に定義された仕様記述言語VDM-SL, VDM++, VDM-RTを持つ
	\item　制約条件(不変条件、事後条件、事前条件)の記述が可能である
	\item　証明手法がある\footnote{証明手法は初心者には難しいため、本書では説明を省略した。}
	\item　産業界の実用のために拡張された
\end{itemize} 

\section{VDM++とは？}
	\label{WhatIsVDMPP}
	\index{VDM++とは@VDM++とは？}

VDM++\cite{Kyushu2016PP}は、1993年に、欧州連合ESPRIT計画のAFRODITEプロジェクトで、
VDM-SL\cite{Kyushu2016SL}をオブジェクト指向拡張したオブジェクト指向形式仕様記述言語である。

オブジェクト指向構文以外に、関数型言語構文を持ち、
C++やJavaなどと同じく構造化言語の構文も持っている。

VDMToolsとOverture Toolsという2つのVDM++支援ツールがあり、
それらを用いて、以下の様な仕様の検証が可能になった。

\begin{itemize}
	\item　構文チェック、型チェック、仕様アニメーション(仕様のシンボリック実行)
	\item　仕様アニメーションによる組合せテストおよび回帰テストと、テストのコードカバレージ表示
	\item　証明課題
		\index{しょうめいかだい@証明課題}
		\footnote{証明課題が全て証明できれば、モデルに内部矛盾は無いと主張できる。}
		生成機能を使った、証明課題レビュー
\end{itemize} 

VDMToolsは、C++とJavaの生成機能がある。

\section{なぜVDMを選択したか？}
	\label{WhyVDM}
	\index{なぜVDMをせんたくしたか@なぜVDMを選択したか？}

\subsection{形式手法の種類}
	\index{けいしきしゅほうのしゅるい@形式手法の種類}

形式手法には主なものとして、モデル規範型、性質規範型、モデル検査がある。
この中で、現場の技術者に理解しやすくシステム全体を仕様化できるので、
モデル規範型VDMを採用した。
実際に\ref{VDMeffect}章で紹介するシステムでは、
3ヶ月の学習と仕様記述の試行を経て、実用開発を行うことができた。

モデル規範型には、他にもB, event-B, Z, RAISEといった有用な手法があるが、
いずれも、「証明を前提」としているため、
開発現場で適用する「最初の形式手法」としては、不適切と判断したのである。

性質規範型の手法としては、CafeOBJやMaudeなどがあるが、
VDMより1段階抽象度が高く、これも「最初の形式手法」としては、不適切と判断した。

モデル検査手法にはSPINやSMVがあるが、
モデル検査用仕様記述言語は、検証効率を上げるため、
システムの振舞を表す部分の一部だけを仕様記述するため、
データ構造などを含むシステムの他の側面をほとんど記述することができない。
すなわち、システム全体の仕様を記述することはできず、
ある側面からの検証にとどまり、
かつ、開発現場に適用するには3年程度の試行期間が必要と思われ、
「最初の形式手法」としては不適切と判断した。

\subsection{形式手法の検証方法とツール}
	\index{けいしきしゅほうけんしょうほうほうとつーる@形式手法の検証方法とツール}

形式手法の検証方法としては、証明・モデル検査・仕様アニメーションの3つがある。

証明はRAISEを支援するRAISE Toolや、event-Bを支援するRodinがあるが、
最低でも5年程度の学習期間が必要と判断して、
「最初の形式手法」としては採用しなかった。

モデル検査は、ツールを使用することにより、
教科書的な簡単な問題は、簡単に検証することができる場合があるが、
エラーが見つかった場合の、原因の特定などに難しいところがあり、
「最初の形式手法」としては採用しなかった。

結局、VDMを使用するVDMToolsが、仕様アニメーションを使用しているので、
プログラムテストと同じ感覚で使用することができるため、
開発現場の技術者の「最初の形式手法ツール」として最適だと判断した。

\subsection{VDMの参考文献}
	\label{VDMref}
	\index{VDMのさんこうぶんけん@VDMの参考文献}
VDM++\cite{Kyushu2016PP}は、
1970年代中頃にIBMウィーン研究所で開発されたVDM-SL\cite{Kyushu2016SL}を拡張し、
さらにオブジェクト指向拡張した形式仕様記述言語である。

VDM++の教科書としては\cite{Sakoh2010}がある。

VDM++を開発現場で実践的に使う場合の解説が\cite{Sahara2008}にある。


