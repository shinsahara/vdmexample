\section{出口ドアクラス}
実際のドアの内側から出ることに関係する部分を表す。

\begin{vdm_al}
class 出口ドア is subclass of ドア

operations
public 出口ドア : (場所グラフ`場所ID * 場所グラフ`場所ID) * ドア錠状態  *  ドア開閉状態 ==> 出口ドア 
出口ドア (aドア位置, aドア錠状態, aドア開閉状態) ==  (
	sドア位置 := aドア位置;
	sドア錠状態 := aドア錠状態;
	sドア開閉状態 := aドア開閉状態;
	if sドア開閉状態 = <開> then
		sドアが開いた時間 := s現在時間
	else
		sドアが開いた時間 := nil
);

public 出口ドア : (場所グラフ`場所ID * 場所グラフ`場所ID) * ドア錠状態  *  ドア開閉状態 * [時間] ==> 出口ドア 
出口ドア (aドア位置, aドア錠状態, aドア開閉状態, aドアが開いた時間) ==  (
	sドア位置 := aドア位置;
	sドア錠状態 := aドア錠状態;
	sドア開閉状態 := aドア開閉状態;
	sドアが開いた時間 := aドアが開いた時間
);

public コピーする : (場所グラフ`場所ID * 場所グラフ`場所ID) ==> 出口ドア
コピーする(aドア位置) == (
	return new 出口ドア(aドア位置, sドア錠状態, sドア開閉状態, sドアが開いた時間)
);

public タイムアウトである : () ==> bool
タイムアウトである() == return s現在時間 > sドアが開いた時間 + タイムアウト時間;

public 通過可能である : () ==> bool
通過可能である() ==
	return sドア開閉状態 = <開>;

public 施錠する : () ==> ()
施錠する() == skip;

public 閉める : () ==> ()
閉める() == sドア開閉状態 := <閉>;

end 出口ドア
\end{vdm_al}